# dependencies

这里面表示本工程所有依赖的npm package, 所有的前端第三方库都提供了npm package, 比如 'jquery', 'vue', 'react'等等. 

注意:npm package不一定就是第三方的npm package, 我们也可以把自己开发的组件,按照npm标准格式提交到私有的npm服务器上.

在我们引用第三方库的时候,自然会遇到一个问题:版本控制,你需要清楚地知道并且控制你所引入的第三方库的版本. 
举个简单的例子,你在自己的工程中引入了jQuery,jQuery 3.x版本是不能兼容IE浏览器的. 如果你依然在开发IE8之类的应用,只能引入1.x版本.
以下就简单总结以下版本运算符的规则:
> 详细规则内容请参见:[semver] (https://docs.npmjs.com/misc/semver)

版本限定符号有很多, 在实际的工程种通常情况下是不会使用通配符来随意指定版本的, 所以这里只简单总结一下常见的版本限定符号: ^, ~, <=, >=, <, >, -

  1. 直接给出版本号,匹配精确版本
  2. <, >, <=, >=, - (表示闭包含区间) 
  3. ~表示约等于, 如果指定 x.y.z, 则范围是 >= x.y.z <= x.(y+1).0 , 如果缺失,则相当于缺失部分为x
  4. ^表示兼容版本,按照兼容规则,比如:
  ```nohighlight
    ^1.2.3 := >=1.2.3 <2.0.0  // 大版本变动表示不兼容
    ^0.2.3 := >=0.2.3 <0.3.0  // 大版本为0,表示开发版本,所以兼容版本下移
    ^0.0.3 := >=0.0.3 <0.0.4  // 大版本为0,小版本为0,所以兼容版本以patch为准
  ```
  5. x符号,表示部分统配,缺省的部分,和使用x是等价的,比如:"1" 等价于 “1.x.x”
在区间匹配中,如果指定的是pre-release版本,则只会在该版本下的pre-release中找合适的版本,当x.y.z发生变化,则只会去找正式release的package.
很多情况下,"~"和"^"定位的区间是一样的,但是建议使用"^", 因为它含有版本的兼容的含义,这是"~"所没有的.

# devDependencies

它和dependencies的区别在于,它表示开发环境中所有依赖的第三方库,仅仅只是开发环境. 
我们自己工程代码中不会依赖是不会包含任何这其中的任何一个库. 
请务必区分dependencies和devDependencies. 虽然package.json本身是不会做校验,但是请务必严格遵守这个约定.

# peerDependencies
https://nodejs.org/en/blog/npm/peer-dependencies/


The Solution: Peer Dependencies
What we need is a way of expressing these "dependencies" between plugins and their host package. Some way of saying, "I only work when plugged in to version 1.2.x of my host package, so if you install me, be sure that it's alongside a compatible host." We call this relationship a peer dependency.

The peer dependency idea has been kicked around for literally years. After volunteering to get this done "over the weekend" nine months ago, I finally found a free weekend, and now peer dependencies are in npm!

Specifically, they were introduced in a rudimentary form in npm 1.2.0, and refined over the next few releases into something I'm actually happy with. Today Isaac packaged up npm 1.2.10 into Node.js 0.8.19, so if you've installed the latest version of Node, you should be ready to use peer dependencies!

As proof, I present you the results of trying to install jitsu 0.11.6 with npm 1.2.10:

```
npm ERR! peerinvalid The package flatiron does not satisfy its siblings' peerDependencies requirements!
npm ERR! peerinvalid Peer flatiron-cli-config@0.1.3 wants flatiron@~0.1.9
npm ERR! peerinvalid Peer flatiron-cli-users@0.1.4 wants flatiron@~0.3.0
```


As you can see, jitsu depends on two Flatiron-related packages, which themselves peer-depend on conflicting versions of Flatiron. Good thing npm was around to help us figure out this conflict, so it could be fixed in version 0.11.7!

Using Peer Dependencies
Peer dependencies are pretty simple to use. When writing a plugin, figure out what version of the host package you peer-depend on, and add it to your package.json:

{
  "name": "chai-as-promised",
  "peerDependencies": {
    "chai": "1.x"
  }
}
Now, when installing chai-as-promised, the chai package will come along with it. And if later you try to install another Chai plugin that only works with 0.x versions of Chai, you'll get an error. Nice!

UPDATE: npm versions 1 and 2 will automatically install peerDependencies if they are not explicitly depended upon higher in the dependency tree. For all following versions of npm (starting with npm@3), this will no longer be the case. You will receive a warning that the peerDependency is not installed instead.
One piece of advice: peer dependency requirements, unlike those for regular dependencies, should be lenient. You should not lock your peer dependencies down to specific patch versions. It would be really annoying if one Chai plugin peer-depended on Chai 1.4.1, while another depended on Chai 1.5.0, simply because the authors were lazy and didn't spend the time figuring out the actual minimum version of Chai they are compatible with.

The best way to determine what your peer dependency requirements should be is to actually follow semver. Assume that only changes in the host package's major version will break your plugin. Thus, if you've worked with every 1.x version of the host package, use "~1.0" or "1.x" to express this. If you depend on features introduced in 1.5.2, use ">= 1.5.2 < 2".

Now go forth, and peer depend!
