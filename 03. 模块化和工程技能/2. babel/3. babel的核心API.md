# babel提供的常用API
1. parse (@babel/parser)
2. traverse (@babel/traverse)
3. @babel/types
4. @babel/generator
5. @babel/template




## 1. parse -- @babel/parser
```js
import { parse } from "@babel/parser";
parse(code, {
  sourceType: "module", // default: "script",
  plugins: []
})
```
sourceType: 
1. module: 将会在严格模式下解析并且允许模块定义，script不会。
2. script： 在发现 import 或 export 时产生错误。

## 2. @babel/traverse
```js
import traverse from "@babel/traverse";
traverse(file.ast, visitor, file.scope);

traverse(ast, {
  enter(path) {
    if (
      path.node.type === "Identifier" &&
      path.node.name === "n"
    ) {
      path.node.name = "x";
    }
  }
});

```

## 3. @babel/types
Babel Types 是一个用于AST节点的lodash式工具库，它包含了构建，验证以及变换AST节点的方法。
该工具库包含了考虑周到的工具方法，对编写处理AST逻辑非常有用。
```js
import traverse from "@babel/traverse";
import * as t from "@babel/types";

traverse(ast, {
  enter(path) {
    if (t.isIdentifier(path.node, {name: "n"})) {
      path.node.name = "x";
    }
  }
});
```

Babel Types 模块拥有每一个单一类型节点的定义，包括节点属性，合法值，如何构建节点，遍历节点，以及节点的别名等信息。
单一节点类型的定义如下：
```js
defineType("BinaryExpression", {
  builder: ["operator", "left", "right"],
  fields: {
    operator: {
      validate: assertValueType("string")
    },
    left: {
      validate: assertNodeType("Expression")
    },
    right: {
      validate: assertNodeType("Expression")
    }
  },
  visitor: ["left", "right"],
  aliases: ["Binary", "Expression"]
})
```
每一个节点类型都有构造器方法builder，按类似下面的方式使用：
```js
t.binaryExpression("*", t.identifier("a"), t.identifier("b"));
// 构建的AST如下：
{
  type: "BinaryExpression",
  operator: "*",
  left: {
    type: "Identifier",
    name: "a"
  },
  right: {
    type: "Identifier",
    name: "b"
  }
}
```





# @babel/generator

# @babel/template
