# UI组件库的整体工程方案（支持按需加载）
UI组件库的最终产物应该是一个npm包，用户在使用的时候，直接将UI组件库包引入到工程中即可。
出于性能考虑，UI组件库需要支持按需加载。例如，用户只是使用了Button组件，那么用户的工程在最终打包的时候，只需要引入部分的库代码，而非全部。

## antd 的整体工程结构 (依赖图层次)
```
               -------
1. 全局样式：  |  style  |
               -------

               -------
2. ICON组件    | icon  |
               -------

               -------       ------      ----
3. 简单组件    | select |    | button |  | ... |
               -------       ------      ----

               -----------      -------
4. 一般组件    | pagination |   |  ...  |
               -----------      -------

5. ...
```
## antd 的输出
1. 整体打包的输出在：antd/dist（antd.min.js, antd.min.css), 这个主要用于 <script src=""> 方式引入。
2. 按需加载的使用方法：antd/lib, antd/es.
3. package.json中指定入口：antd/lib/index.js, 用于直接在工程中 import antd from 'antd'.

需要自己设计 gulp 脚本将源码(es6/ts)格式的代码，转换为 commonJS。
上传到npm包中供用户使用的代码，必须应该是commonJS！！！ 
按需加载实际上就是直接使用转码后的源码，然后再通过使用者自己工程的webpack来实现的依赖去重。

```js
import Button from 'antd/lib/button';
import 'antd/lib/button/style';  // 实际加载的是 less
// 或者 antd/lib/button/style/css 加载 css 文件
```
如果是选择加载less文件，则需要在用户的工程中配置 less-loader 的 options：{javascriptEnabled: true}.


为了让用户无感知地通过以下方式使用，并且能够达到按需加载的目的，antd 提供了 babel-import-plugin 和 ts-import-plugin。
```js
import { Button, Pagination } from 'antd';
```

https://github.com/ant-design/babel-plugin-import


