# webgl 坐标系
webgl采用的的右手坐标系，x轴方向向右，y轴方向向上，z轴方向向用户.
坐标原点在屏幕的正中心.
注意：这个和HTML页面中定义的方向不一样：x轴向右，y轴向下, 坐标原点为左上点.

# 1. 获取vertex和设置vertex

## step1. 在着色器程序中定义 Attribute
```js
`
attribute vec4 a_Position;
attribute float a_PointSize;

void main () {
    gl_Position = a_Position;
    gl_PointSize = a_PointSize;
}
`
```

## step2. 在js代码中获取着色器属性地址
```js
var a_Position = gl.getAttribLocation(gl.program, 'a_Position')
var a_PointSize = gl.getAttribLocation(gl.program, 'a_PointSize')
```

## step3. 对属性(地址)进行填值
对应的webgl的api为：
gl.vertexAttrib1f
gl.vertexAttrib2f
gl.vertexAttrib3f
gl.vertexAttrib4f
gl.vertexAttrib1fv
gl.vertexAttrib2fv
gl.vertexAttrib3fv
gl.vertexAttrib4fv
这里的后缀数字表示参数个数，f表示float(如果为i，表示int), v表示数组.
填值的过程相当于在原基础上的追加.

```js
gl.vertexAttrib3f(a_Position, 0.0, 0.0, 0.0)
// 或
gl.vertexAttrib4fv(
    a_Position, 
    new Float32Array([0.0, 0.0, 0.0, 1.0])    
)

gl.vertexAttrib1f(a_PointSize, 5.0)

```

## 2. 获取颜色和设置颜色
### step1. 在片元着色器程序中定义 uniform 或 varying （不能使用attribute）
uniform表示一致性的数据.
```js
`
precision mediump float;
uniform vec4 uFragColor;

void main () {
    gl_FragColor = uFragColor;
}
`
```

```js
var uFragColor = gl.getUniformLocation(gl.program, 'uFragColor')
gl.uniform4f(location, v0, v1, v2, v3)
```

## 缓冲区对象
使用缓冲区对象向vertex着色器传入多个顶点的数据，需要以下5个步骤.
处理其他对象，如纹理对象，帧缓冲区对象(光照)时的步骤也类似.
1. gl.createBuffer()
2. gl.bindBuffer(target, buffer)
target取值范围：
gl.ARRAY_BUFFER: 表示缓冲区对象中包含了顶点的数据.
gl.ELEMENT_ARRAY_BUFFER: 表示缓冲区对象中包含了顶点的索引值.

3. 将数据写入缓冲区对象: gl.bufferData(target, data, usage)
target同上.
usage: 表示程序将如何使用存储在缓冲区对象中的数据. 
该参数将帮助WebGL优化操作.即使传入一个错误值，也不会终止程序，只是为影响程序执行效率.
usage的取值范围：
gl.STATIC_DRAW: 只会向缓冲区对象中写入一次数据，但需要绘制很多次
gl.STREAM_DRAW: 只会向缓冲区对象中写入一次数据，然后绘制若干次
gl.DYNAMIC_DRAW: 会向缓冲区对象中多次写入数据，并绘制多次

4. 将缓冲区对象分配给一个attribute变量: gl.vertexAttribPointer(location, size, type, normalized, stride, offset)
size: 缓冲区中每个顶点的分量个数(1-4).
type: 每个分量的值类型
gl.UNSIGNED_BYTE  <=>   Uint8Array
gl.SHORT          <=>   Int16Array
gl.UNSIGNED_SHORT <=>   Uint16Array
gl.INT            <=>   Int32Array
gl.UNSIGNED_INT   <=>   Uint32Array
gl.FLOAT          <=>   Float32Array
normalized: true | false， 表示是否将非浮点型的数据归一化到 [0,1] 或 [-1,1] 区间
stride: 指定相邻两个顶点间的字节数, 默认为0
offset: 指定缓冲区对象中的偏移量(以字节为单位), 即attribute变量从缓冲区中的何处开始.

5. 开启attribute变量: gl.enableVertexAttribArray(location)
可以使用gl.disableVertexAttribArray()来关闭分配.
