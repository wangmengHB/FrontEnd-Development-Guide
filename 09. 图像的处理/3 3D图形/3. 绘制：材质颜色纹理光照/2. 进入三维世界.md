7. 进入三维世界  296 - 309

# 隐藏面消除
webgl 在默认情况下会按照缓冲区中的顺序绘制图形，而且后绘制的图形覆盖先绘制的图形。
为了解决这个问题，webgl 提供了隐藏面消除(hidden surface removal)功能。
```js
gl.enable(gl.DEPTH_TEST);       // 开启隐藏面消除功能
gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);  // 在绘制之前，清除颜色缓冲区和深度缓冲区
```
深度缓冲区是一个中间对象，其作用是帮助 webgl 进行隐藏面消除。
webgl 在颜色缓冲区中绘制几何图形，绘制完成以后将颜色缓冲区显示到 canvas 上。

# 深度冲突
当两个表面过去接近时，深度缓冲区有限的精度已经不能区分哪个在前，哪个在后，会产生深度冲突的问题 (Z Fighting).
webgl 提供一种被称为 多边形偏移的机制来解决这个问题。
该机制将自动在Z值加上一个偏移量，偏移量的值由物体表面相对于观察者的角度来确定。
分多次绘制场景，在后面的绘制过程中加上偏移。
```js
gl.enable(gl.POLYGON_OFFSET_FILL);
gl.polygonOffset(1.0, 1.0);
```

