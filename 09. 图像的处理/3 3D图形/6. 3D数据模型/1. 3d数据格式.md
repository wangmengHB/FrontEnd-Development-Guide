# 最常用的8种3D数据格式
https://all3dp.com/3d-file-format-3d-files-3d-printer-3d-cad-vrml-stl-obj/

最常用的3D数据格式有：
1. 准标准6种：STL, OBJ, COLLADA, IGES, STEP, VRML/X3D。
OBJ文件中的 ASCII 部分是通用信息，二进制部分是私有信息。
2. 2种私有的格式：FBX，3DS。

不同的工业领域有不同的偏好。

通常情况下，一个3D模型应该包含以下信息：几何，外观，创景，动画。
但并不是所有3D格式都会存储这些全部信息。
STL格式只会记录几何信息，然后丢弃其他所有信息。
COLLADA 格式:会记录全部信息。

# 3D模型信息
## 几何信息编码
有三种几何编码的方法：approximate mesh（近似网格），precise mesh（精密网格），constructive solid geometry (CSG：构造实体几何)。
1. approximate mesh
3D模型的表面是由一些小多边形（三角形）组成的网格。这些三角形的顶点和向外的法线矢量会被记录下来。
将表面拆分为网格的过程称为曲面细分（tessellation）。
近似网格的特别使用于不用指定3D模型的最小精度的场景，例如 3D打印，3D打印不能超过一定的分辨率的。
3D打印中最常用的格式就是 STL，它是近似网格的编码方法。
2. 精密网格
在某些场景下是不能使用近似网格的，比如飞机的3D模型，必须要保证面都是平滑的。
精密网格采用非均匀有理B样条面片（Non-Uniform Rational B-Spline patches）来取代多边形。表面是由小数量的加权控制点和knots集合组成，根据这些控制点和knots，进行数学插值拟合计算，得到平滑的平面。
紧密网格在任意分辨率下都是精确的，相应地渲染速度会比近似网格慢。
3. CSG
3D的图形是通过基础图形（立方体，球面等）的加减组合而成（类似于3D版的svg思想）。如果将它转成网格格式，将会丢掉中间的所有编辑过程信息。

## 外观
3D模型的外观信息包括材质类型，纹理，颜色等。外观信息可以以两种方式编码：
1. 纹理映射
在纹理映射中，3D模型表面的每一个点都映射到了一个二维的图像上（类似于给一个面上贴墙纸）。
这个代表纹理的二维图像，也应该存储到3D模型文件中，或者是位置索引。

2. Face attributes
另外一种通用的方法是给网格的每一个面分配一些属性：包括颜色，纹理和材质类型。
另外，一个表面可以包含镜面部分（specular component），也可以是透明或半透明(transmissive component).
透明表面通常会有光折射，这中扭曲是用 refraction 索引表示，跟材质类型相关。

## 场景信息
场景信息包含：摄像机，光源，和其他的3D模型。
摄像机由4个参数定义：放大和主点(magnification and principal point),位置, 摄像机面对的方向，和一个表示上方向的箭头。
光源：最简单的点光源，位置，颜色，强度。
3D模型和其他3D物体的空间关系，有时候也是需要存储的。特别是一个物体是由多个物体一起组成。
值得注意的是，大部分3D文件格式不支持场景信息。

## 动画
3D动画最常用的方法是“骷髅动画”，每个模型都跟一个骨架相关联。

# 3D文件格式选择
具体选择哪一种文件格式，取决于需求。
1. 3D打印场景
STL格式是最流行的格式，但是没有外观信息。如果需要打印彩色3D模型，则不能使用STL格式。
OBJ或AMF格式能够存储相应的外观信息。OBJ是最常用的彩色3D模型格式。

2. 基于图形的应用，游戏电影
需要近似网格方法来加快渲染速度，还需要外观和动画信息。
FBX和COLLADA是理想的选择。

3. 高精度工程
IGES, STEP 格式适合这种应用。

## 3D文件格式的功能列表：
| 文件格式 | 近似网格 | 精密网格 | CSG | 颜色 | 材质 | 纹理 | 摄像机 | 光线 | 相对位置 | 动画 |
| ------- | ------ | ------  | --- | --- | ---  | ---- | ----- | --- | ------ | ----- |
| STL     | 是     | ------  | --- | --- | ---  | ---- | ----- | --- | ------ | ----- |
| OBJ     | 是     | 是      | ---  | 是  | 是   | 是   | ----- | --- | ------ | ----- |
| FBX     | 是     | 是      | ---  | 是  | 是   | 是   | 是    | 是   | 是     | 是    |
| COLLADA | 是     | 是      | ---  | 是  | 是   | 是   | 是    | 是   | 是     | 是    |
| 3DS     | 是     | ------  | ---  | 是  | 是   | 是   | 是    | 是   | 是     | ---- |
| IGES    | 是     | 是      | 是   | 是  | --   | --   | --    | --   | 是     | ---- |
| STEP    | 是     | 是      | 是   | 是  | 是   | 是    | --    | --   | 是     | ---- |
| X3D     | 是     | 是      | 是   | 是  | 是   | 是    | 是    | 是   | 是     | 是    |

## 常用3D建模软件支持的格式：
| 建模工具    | STL   | OBJ    | FBX    | COLLADA | 3DS    | VRML   | X3D    | IGES   | STEP   |
| ---------- | ----- | -------| -------| ------- | -------| -------| -------| -------| -------|
| Blender    | Both  | Both   | Both   | Both    | Both   | Both   | Both   | No     | No     |
| Unity      | No    | Import | Import | Import  | Import | No     | No     | No     | No     |
| AutoCAD    | No    | No     | Both   | No      | Import | No     | No     | Both   | Import |
| Fusion360  | Both  | Import | Both   | No      | No     | No     | No     | Both   | Both   |
| Solidworks | Both  | Both   | No     | No      | Both   | Both   | No     | Both   | Both   |
| Sketchup   | No    | Export | Export | Both    | Both   | Export | No     | No     | No     |
| Rhino      | Both  | Both   | Both   | Export  | Import | Both   | Export | Import | Import |
| Cinema4D   | Both  | Both   | Both   | Both    | Both   | Both   | No     | Import | No     |


# OBJ 格式
Wavefront Technologies 公司开发的公有格式。文件后缀是 .OBJ。
同时支持近似网格和精确网格：
* 当使用近似网格时，它不限制网格单元必需为三角面，如果用户喜欢，可以使用四边形作为单元面。
* 当使用精密网格时，它使用光滑曲线和曲面，如 NURBS。
OBJ格式能够存储颜色和纹理信息，这些信息存储在另外一个单独的文件中，该文件的后缀是 .MTL (Material Template Library)。
OBJ格式不支持动画，ASCII编码部分表示开源格式，二进制编码部分表示 私有格式。
OBJ格式在3D打印和3D图形中应用很普遍。

# FBX 格式
AutoDest公司的私有文件格式，在电影和游戏行业中应用普遍。AutoCAD, Fusion 360, Maya, 3DS Max产品。
除了几何和外观信息外，它支持骨骼动画和变形信息，同时支持二进制和ASCII编码。

# COLLADA
公有格式，文件后缀是 .DAE，由非盈利技术联盟 Khronos Group 管理。 大量应用于电影和游戏行业。
支持几何，外观，场景和动画信息，除此之外，它是少有的支持运动和物理信息。
它使用XML格式存储数据。
创建 COLLADA 格式的原本目的是成为 3D 文件格式标准，事实上，2013年它被采纳为 ISO 标准。
但是, 业界的共识是 COLLADA 没有跟上时代。Autodest旗下的产品的交换格式由 COLLADA 转向了 FBX 和 Alembic。

# 3DS 格式
私有格式，最早的3D Max中使用的格式，最古老的格式之一，主要用于建筑，工程，教育，制造。
它是3D模型事实上的存储标准之一。
它使用近似三角面网格，限制最大的面数不能超过 65536. 支持外观信息：颜色，材质，纹理，透射率等。支持场景信息：摄像机位置和光源。但它不支持定向光源（无限远光源）。
3DS格式指定了二进制编码，并且分块存储信息。使得解析器可以跳过不识别的分块，并允许扩展。
因为这个格式非常古老，所以大部分软件都支持这种格式。
但是它只能存储基本信息，如果不丢失信息，需要使用 3D Max 的 .PRJ（或早起 .max）格式文件。

# X3D 格式
X3D 是 VRML（Virtual Reality Modeling Language）的后继，是由 WWW 开发的。它是XML格式。
X3D 的目标是成为 Web 的 3D文件格式标准，也被设计成像SVG一样和H5页面无缝集成。
但是直到今天为止，这种格式没有被广泛地接受。

# IGES 格式 和 STEP 格式
主要应用于美国空军，文件后缀 .IGS, .IGES.
使用ASCII编码，可以使用 电路图，线框图，精确的自由曲面 或 CSG 来存储几何相关信息。可以存储颜色，但是不支持材质纹理，不支持动画。
IGES格式已经不再开发了，它的后继是 STEP 格式。

