# 最常用的8种3D数据格式
https://all3dp.com/3d-file-format-3d-files-3d-printer-3d-cad-vrml-stl-obj/

最常用的3D数据格式有：
1. 准标准6种：STL（STereoLithography）, OBJ, COLLADA, IGES, STEP, VRML/X3D。
OBJ文件中的 ASCII 部分是通用信息，二进制部分是私有信息。
2. 2种私有的格式：FBX，3DS。

不同的工业领域有不同的偏好。

通常情况下，一个3D模型应该包含以下信息：几何，外观，创景，动画。
但并不是所有3D格式都会存储这些全部信息。
STL格式只会记录几何信息，然后丢弃其他所有信息。
COLLADA 格式:会记录全部信息。

# 3D模型信息
## 几何信息编码
有三种几何编码的方法：approximate mesh（近似网格），precise mesh（精密网格），constructive solid geometry (CSG：构造实体几何)。
1. approximate mesh
3D模型的表面是由一些小多边形（三角形）组成的网格。这些三角形的顶点和向外的法线矢量会被记录下来。
将表面拆分为网格的过程称为曲面细分（tessellation）。
近似网格的特别使用于不用指定3D模型的最小精度的场景，例如 3D打印，3D打印不能超过一定的分辨率的。
3D打印中最常用的格式就是 STL，它是近似网格的编码方法。
2. 精密网格
在某些场景下是不能使用近似网格的，比如飞机的3D模型，必须要保证面都是平滑的。
精密网格采用非均匀有理B样条面片（Non-Uniform Rational B-Spline patches）来取代多边形。表面是由小数量的加权控制点和knots集合组成，根据这些控制点和knots，进行数学插值拟合计算，得到平滑的平面。
紧密网格在任意分辨率下都是精确的，相应地渲染速度会比近似网格慢。
3. CSG
3D的图形是通过基础图形（立方体，球面等）的加减组合而成（类似于3D版的svg思想）。如果将它转成网格格式，将会丢掉中间的所有编辑过程信息。

## 外观
3D模型的外观信息包括材质类型，纹理，颜色等。外观信息可以以两种方式编码：
1. 纹理映射
在纹理映射中，3D模型表面的每一个点都映射到了一个二维的图像上（类似于给一个面上贴墙纸）。
这个代表纹理的二维图像，也应该存储到3D模型文件中，或者是位置索引。

2. Face attributes
另外一种通用的方法是给网格的每一个面分配一些属性：包括颜色，纹理和材质类型。
另外，一个表面可以包含镜面部分（specular component），也可以是透明或半透明(transmissive component).
透明表面通常会有光折射，这中扭曲是用 refraction 索引表示，跟材质类型相关。

## 场景信息
场景信息包含：摄像机，光源，和其他的3D模型。
摄像机由4个参数定义：放大和主点(magnification and principal point),位置, 摄像机面对的方向，和一个表示上方向的箭头。
光源：最简单的点光源，位置，颜色，强度。
3D模型和其他3D物体的空间关系，有时候也是需要存储的。特别是一个物体是由多个物体一起组成。
值得注意的是，大部分3D文件格式不支持场景信息。

## 动画
3D动画最常用的方法是“骷髅动画”，每个模型都跟一个骨架相关联。


# 3D文件格式选择
具体选择哪一种文件格式，取决于需求。
1. 3D打印场景
STL格式是最流行的格式，但是没有外观信息。如果需要打印彩色3D模型，则不能使用STL格式。
OBJ或AMF格式能够存储相应的外观信息。OBJ是最常用的彩色3D模型格式。

2. 基于图形的应用，游戏电影
需要近似网格方法来加快渲染速度，还需要外观和动画信息。
FBX和COLLADA是理想的选择。

3. 高精度工程
IGES, STEP 格式适合这种应用。

## 3D文件格式的功能列表：
| 文件格式 | 近似网格 | 精密网格 | CSG | 颜色 | 材质 | 纹理 | 摄像机 | 光线 | 相对位置 | 动画 |
| ------- | ------ | ------  | --- | --- | ---  | ---- | ----- | --- | ------ | ----- |
| STL     | 是     | ------  | --- | --- | ---  | ---- | ----- | --- | ------ | ----- |
| OBJ     | 是     | 是      | ---  | 是  | 是   | 是   | ----- | --- | ------ | ----- |
| FBX     | 是     | 是      | ---  | 是  | 是   | 是   | 是    | 是   | 是     | 是    |
| COLLADA | 是     | 是      | ---  | 是  | 是   | 是   | 是    | 是   | 是     | 是    |
| 3DS     | 是     | ------  | ---  | 是  | 是   | 是   | 是    | 是   | 是     | ---- |
| IGES    | 是     | 是      | 是   | 是  | --   | --   | --    | --   | 是     | ---- |
| STEP    | 是     | 是      | 是   | 是  | 是   | 是    | --    | --   | 是     | ---- |
| X3D     | 是     | 是      | 是   | 是  | 是   | 是    | 是    | 是   | 是     | 是    |

## 常用3D建模软件支持的格式：
| 建模工具    | STL   | OBJ    | FBX    | COLLADA | 3DS    | VRML   | X3D    | IGES   | STEP   |
| ---------- | ----- | -------| -------| ------- | -------| -------| -------| -------| -------|
| Blender    | Both  | Both   | Both   | Both    | Both   | Both   | Both   | No     | No     |
| Unity      | No    | Import | Import | Import  | Import | No     | No     | No     | No     |
| AutoCAD    | No    | No     | Both   | No      | Import | No     | No     | Both   | Import |
| Fusion360  | Both  | Import | Both   | No      | No     | No     | No     | Both   | Both   |
| Solidworks | Both  | Both   | No     | No      | Both   | Both   | No     | Both   | Both   |
| Sketchup   | No    | Export | Export | Both    | Both   | Export | No     | No     | No     |
| Rhino      | Both  | Both   | Both   | Export  | Import | Both   | Export | Import | Import |
| Cinema4D   | Both  | Both   | Both   | Both    | Both   | Both   | No     | Import | No     |


