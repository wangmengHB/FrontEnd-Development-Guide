
# web 端侧合成视频
可以通过 canvas.captureStream, AudioContext, MediaStream 这三个核心的 API 从 canvas 中直接合成视频。
这意味着：
1. 结合 webrtc， canvas 内容分享，远程教学等场景会有大规模应用
2. web 上制作短视频，完全是可行的，结合 tensorflow / webgl / 常规的图形图像编辑处理 完全可以以纯技术流的方式生产出视频。 

同时也意味着：开发工作量巨大，产品形态设计等等, 这是一个短期内无法完成的事情，必须制定一个长期作战计划。    


任务拆分：
1. tensorflow facemesh/bodypix model 封装  
2. webgl 滤镜改进， 容器 canvas 方案
3. fabricjs video 方案以及， video 的 clipPath 
4. audio 音轨问题，以及 audio 的波形图绘制
5. fabricjs 的方案集成
6. 动画方案设计
7. 动画方案实现   


音频处理的几大问题：
1. 背景音乐的素材库 （必需）
2. 视频文件的音视频流的分离 （未知？）
3. 音频的可视化：1. 整体波形，2. 实时波形，（可解）
4. web 录音问题，去噪滤波 （未知？)
示例：天猫精灵/胎心仪等
天猫精灵（从输入声音中滤除掉音箱自己播放的声音，只取用户的声音作为输入命令）
胎心仪，从输入信号中滤掉母体的心电信号（强信号），只取出胎儿的心电信号（弱信号）。
天猫精灵好像是用硬件方式解决的，使用了麦克风整列，硬件去噪。      
web 录音可能会或多或少地需要处理去噪问题，即使有了好的硬件。   
5. 声音的变声问题 （未知？）
原生的API只有简单的滤波支持，高通低通等，更高级的未知， 如：男转女，女转男，特征变声。
剪映APP 有这些高级功能。  
6. TTS，文本转声音，阿里云有现成的。 （可解）




